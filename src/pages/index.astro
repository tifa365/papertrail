---
import MainLayout from "../layouts/MainLayout.astro";
import SearchBox from "../components/SearchBox.astro";
import GermanyMap from "../components/GermanyMap.astro";
import RegionDetail from "../components/RegionDetail.astro";
import Legend from "../components/Legend.astro";
import TopRegions from "../components/TopRegions.astro";

// Page metadata
const pageTitle = "Papertrail - Lokale Tageszeitungen in Deinem Landkreis";
---

<MainLayout title={pageTitle}>
  <style is:global>
    @import "../styles/global.css";
  </style>

  <div class="papertrail-container">
    <!-- Header - NYT Data Viz Style -->
    <div class="header">
      <div class="header-left">
        <h1>Papertrail</h1>
        <div class="subtitle">LOKALE TAGESZEITUNGEN IN DEINEM LANDKREIS</div>
        <div class="divider"></div>
      </div>
    </div>

    <!-- Detail panel for selected region -->
    <RegionDetail />

    <!-- Map Container -->
    <div class="map-section">
      <GermanyMap />
    </div>
    
    <!-- Top Regions Section -->
    <div class="top-regions-section">
      <TopRegions />
    </div>
  </div>
</MainLayout>

<style>
  .map-section {
    margin-bottom: 1rem; /* Reduced bottom margin */
  }
  
  .top-regions-section {
    margin-bottom: 0; /* No bottom margin */
  }
  
  @media (max-width: 768px) {
    .map-section, .top-regions-section {
      width: 100%;
    }
  }
  
  /* Desktop only: Try to constrain page overflow without affecting map popups */
  @media (min-width: 769px) {
    /* Keep map section with visible overflow for popups */
    .map-section {
      overflow: visible !important;
      position: relative;
      z-index: 100;
    }
  }
</style>
